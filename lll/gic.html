<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
</head>

<body onload="gameStart()">

    <script>
        /* var level1 = [
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            [0, 2, 2, 2, 2, 2, 0, 2, 2, 2, 2, 2, 0],
            [0, 2, 0, 0, 0, 2, 0, 2, 0, 0, 0, 2, 0],
            [0, 2, 0, 2, 2, 2, 2, 2, 2, 2, 0, 2, 0],
            [0, 2, 2, 2, 0, 0, 5, 0, 0, 2, 2, 2, 0],
            [0, 2, 0, 2, 2, 2, 2, 2, 2, 2, 0, 2, 0],
            [0, 2, 0, 0, 2, 2, 0, 2, 2, 0, 0, 2, 0],
            [0, 2, 2, 2, 2, 2, 0, 2, 2, 2, 2, 2, 0],
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
        ]; */
        var level1 = [
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            [0, 2, 2, 2, 2, 2, 2, 0, 2, 2, 2, 2, 2, 2, 0],
            [0, 2, 0, 2, 0, 0, 2, 0, 2, 0, 2, 0, 0, 2, 0],
            [0, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 0],
            [0, 0, 0, 2, 0, 2, 0, 0, 0, 2, 0, 2, 0, 0, 0],
            [1, 1, 0, 2, 2, 2, 2, 2, 2, 2, 2, 2, 0, 1, 1],
            [0, 0, 0, 2, 0, 0, 0, 2, 0, 0, 0, 2, 0, 0, 0],
            [0, 2, 2, 2, 0, 2, 2, 1, 2, 2, 0, 2, 2, 2, 0],
            [0, 0, 0, 2, 0, 0, 0, 2, 0, 0, 0, 2, 0, 0, 0],
            [1, 1, 0, 2, 2, 2, 2, 2, 2, 2, 2, 2, 0, 1, 1],
            [0, 0, 0, 2, 0, 2, 0, 0, 0, 2, 0, 2, 0, 0, 0],
            [0, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 0],
            [0, 2, 0, 2, 0, 0, 2, 0, 2, 0, 2, 0, 0, 2, 0],
            [0, 2, 2, 2, 2, 2, 2, 0, 2, 2, 2, 2, 2, 2, 0],
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
        ];
        var gamePiece;
        var ghostPiece1;
        var ghostPiece2;
        var ghostPiece3;
        var ghostPiece4;
        var score=0;
        x1 = 0; a1 = 0.2; p1 = 0; k = 1; p2 = 0; t = -1;
        y1 = 0; a2 = 1.8; q1 = 0; f = 0; q2 = -5; sc = 0;
        function gameStart() {
            gamePiece = new pac(10, "yellow", 1, 1);
            ghostPiece1 = new ghost(7, 7, -1, 0, "aqua",1);
            ghostPiece2 = new ghost(7, 7, 1, 0, "fuchsia",1);
            ghostPiece3 = new ghost(7, 7, 0, 1, "blue",1);
            ghostPiece4 = new ghost(7, 7, 0, -1, "chartreuse",1);
            
            gameArea.start();
            
        }
var gameArea = {
    canvas: document.createElement("canvas"),
    start: function () {
        this.canvas.width = 500;
        this.canvas.height = 500;
        this.context = this.canvas.getContext("2d");
        document.body.appendChild(this.canvas);
        this.interval = setInterval(updateGameArea, 185);
        text('Score :'+ Math.floor(score), '30px Cosmic Sans MS',100,100,'red');
    },
    clear: function () {
        ctx = gameArea.context;
        ctx.fillStyle = "black";
        ctx.fillRect(0, 0, 500, 500);
        grid();
    }

}
function grid() {
    f = 0;
    for (i = 0; i < 15; i++)
        for (j = 0; j < 15; j++)
            if (level1[i][j] == 0) {
                ctx = gameArea.context;
                ctx.fillStyle = "white";
                ctx.fillRect(j * 24 + 24, i * 24 + 24, 24, 24);
            }
            else if (level1[i][j] == 2) {
                f++;
                ctx = gameArea.context;
                ctx.fillStyle = "red";
                ctx.fillRect(j * 24 + 34, i * 24 + 34, 4, 4);
            }
    if (f == 0)
        alert("You won");
        
}
   function ghost(i,j,p,q,color,temp) {
    this.i=i;
    this.j=j;
    this.p=p;
    this.q=q;
    this.temp=temp;
    this.color=color;
    this.update = function () {
    level1[this.i][this.j] = this.temp;
    if (Math.abs(this.p)) {
        if (level1[this.i][this.j + 1] && level1[this.i][this.j - 1]) {
            if (Math.round(Math.random())) { this.p = 0; this.q = 1 }
            else { this.p = 0; this.q = -1 }
        }
        else if (level1[this.i][this.j + 1]) {
            this.p = 0; this.q = 1;
        }
        else if (level1[this.i][this.j - 1]) {
            this.p = 0; this.q = -1;
        }
        else if (level1[this.i + this.p][this.j + this.q]) {
            this.q = 0;
        }
        else {
            this.p *= -1; this.q = 0;
        }
    }
    else {
        if (level1[this.i + 1][this.j] && level1[this.i - 1][this.j]) {
            if (Math.round(Math.random())) { this.p = 1; this.q = 0 }
            else { this.p = -1; this.q = 0 }
        }
        else if (level1[this.i + 1][this.j]) {
            this.p = 1; this.q = 0;
        }
        else if (level1[this.i - 1][this.j]) {
            this.p = -1; this.q = 0;
        }
        else if (level1[this.i + this.p][this.j + this.q]) {
            this.p = 0;
        }
        else {
            this.q *= -1; this.p = 0;
        }

        
    }
    
    if(level1[this.i + this.p][this.j + this.q] != 5){
    this.temp=level1[this.i + this.p][this.j + this.q] 
    level1[this.i + this.p][this.j + this.q] = 5;
    this.i += this.p;
    this.j += this.q;
    }
   
    ctx = gameArea.context;
    ctx.fillStyle = this.color;
    ctx.beginPath();
    ctx.arc(this.j * 24 + 36, this.i * 24 + 36, 10, 1 * Math.PI, 2 * Math.PI);
    ctx.lineTo(this.j * 24 + 36, this.i * 24 + 36);
    ctx.fill();
    ctx.fillStyle = this.color;
    ctx.moveTo(this.j * 24 + 26, this.i * 24 + 36);
    ctx.lineTo(this.j * 24 + 26, this.i * 24 + 46);
    ctx.lineTo(this.j * 24 + 31, this.i * 24 + 41);
    ctx.lineTo(this.j * 24 + 36, this.i * 24 + 46);
    ctx.lineTo(this.j * 24 + 41, this.i * 24 + 41);
    ctx.lineTo(this.j * 24 + 46, this.i * 24 + 46);
    ctx.lineTo(this.j * 24 + 46, this.i * 24 + 36);
    ctx.fill();
}
}
function pac(rad, color, p, q) {
    this.rad = rad;
    this.p = p;
    this.q = q;
    this.update = function () {
    if(level1[this.p][this.q] == 5 || level1[this.p + p1][this.q + q1] == 5)
            alert("ded");
        onkeydown = function (e) {
            var z = e.keyCode;
            if (z == 37 || z == 38 || z == 39 || z == 40) {
                t = -1;
                if (z == 37) { p1 = 0; q1 = -1; p2 = 0; q2 = -6; a1 = 1.2; a2 = 0.8; }
                else if (z == 38) { p1 = -1; q1 = 0; p2 = 5; q2 = 0; a1 = 1.7; a2 = 1.3; }
                else if (z == 39) { p1 = 0; q1 = 1; p2 = 0; q2 = -6; a1 = 0.2; a2 = 1.8; }
                else if (z == 40) { q1 = 0; p1 = 1; p2 = 5; q2 = 0; a1 = 0.7; a2 = 0.3; }
            }
        }
        
       
            if (level1[this.p + p1][this.q + q1]) {
                sc++;
                gamePiece.p += p1;
                gamePiece.q += q1;
                level1[this.p][this.q] = 1;
            }
            else { p1 = 0; q1 = 0; }
        
        if (t *= -1) {
            a1 -= t * 0.18;
            a2 += t * 0.18;
        }
        ctx = gameArea.context;
        ctx.fillStyle = color;
        ctx.beginPath();
        ctx.arc((this.q * 24) + 36, (this.p * 24) + 36, this.rad, a1 * Math.PI, a2 * Math.PI);
        ctx.lineTo((this.q * 24) + 36, (this.p * 24) + 36);
        ctx.fill();
        ctx.fillStyle = "black";
        ctx.fillRect((this.q * 24) + 36 + p2, (this.p * 24) + 36 + q2, 2, 2);
        score+=1/60;
        
    }
}
function updateGameArea() {
    gameArea.clear();
    gamePiece.update();
    ghostPiece1.update();
    ghostPiece2.update();
    ghostPiece3.update();
    ghostPiece4.update();
    score+=1/60;
            
}

function text(txt,fnt,x,y,c){
context.fillStyle = c;
context.font=fnt;
context.fillText(txt,x,y);
}
</script>

</body>

</html>